(()=>{"use strict";var e,t={719:(e,t,o)=>{class n{constructor(e,t="",o="none",n="low",c=!1,r=crypto.randomUUID()){this.id=r,this.title=e,this.description=t,this.dueDate=o,this.priority=n,this.completed=c}}class c{constructor(e){this.id=crypto.randomUUID(),this.name=e,this.todos=[]}}const r=new c("Shopping"),s=new c("Work"),i=new n("Buy milk","Get 2 liters of whole milk from the store","2025-09-15","high"),d=new n("Write a report","Prepare the quarterly sales report for the team","2025-09-16","medium"),a=new n("Take over the world","Step-by-step plan to achieve global domination","2025-12-31","low");r.todos.push(i),s.todos.push(d),s.todos.push(a);const l={projects:[r,s],currentProjectId:r.id,isCreatingProject:!1},p=o.p+"1f055c526e15b611b955.svg";var u=o(203),m=o(822),g=o(479),f=o(60),h=o(191),y=o(140);function v(){const e=(0,u.A)(m.A);return e.classList.add("icon","icon-delete"),e}function j(){const e=(0,u.A)(g.A);return e.classList.add("icon","icon-edit"),e}var E=o(394),b=o(217),I=o(648),w=o(265),k=o(17),P=o(722),C=o(37);const L=o.p+"5840c3f9ec67fd052a1b.svg";function N(){(function(){const e=document.getElementById("burger-btn"),t=document.getElementById("mobile-close-sidebar"),o=document.querySelector(".header-logo");o&&(o.src=p),e&&e.replaceChildren(function(){const e=(0,u.A)(f.A);return e.classList.add("icon","icon-menu"),e}()),t&&t.replaceChildren(function(){const e=(0,u.A)(h.A);return e.classList.add("icon","icon-close"),e}())})(),function(){const e=document.getElementById("burger-btn"),t=document.getElementById("mobile-close-sidebar"),o=document.getElementById("sidebar"),n=document.getElementById("sidebar-overlay");function c(){document.body.classList.remove("sidebar-is-open"),o.classList.remove("is-open"),n.classList.add("hidden")}e&&t&&o&&n?(e.addEventListener("click",function(){document.body.classList.add("sidebar-is-open"),o.classList.add("is-open"),n.classList.remove("hidden")}),t.addEventListener("click",c),n.addEventListener("click",e=>{e.target===n&&c()})):console.error("Один из элементов сайдбара не найден. Меню сломается.")}()}function x(e){const t=e.projects.find(t=>t.id===e.currentProjectId);(function(e,t,o,n){const c=document.getElementById("sidebar");if(!c.querySelector(".app-header")){const e=document.createElement("div");e.className="app-header";const t=document.createElement("img");t.className="logo-todo",t.src=p,t.sizes="80px",t.width=80,t.height=80,t.alt="Abstract logo for a productivity app.";const o=document.createElement("h1");o.className="app-title",o.textContent="Todo App",e.append(t,o);const n=document.createElement("div");n.className="projects-list";const r=document.createElement("div");r.className="new-project-container";const s=document.createElement("button");s.className="new-project-btn",s.textContent="+ New Project";const i=document.createElement("input");i.type="text",i.id="new-project-input",i.classList.add("new-project-input","is-hidden"),i.placeholder="New project name...",r.append(s,i),c.append(e,n,r)}const r=c.querySelector(".projects-list");if(r.replaceChildren(),0===e.length){const e=document.createElement("div");e.className="projects-empty-state";const t=function(){const e=(0,u.A)(y.A);return e.classList.add("icon","icon-folder-plus"),e}(),o=document.createElement("p");o.className="empty-state-message",o.textContent="Create your first project",e.append(t,o),r.appendChild(e)}else e.forEach(e=>{const o=document.createElement("div");if(o.dataset.projectId=e.id,o.className="project-item",e.id===t&&o.classList.add("active-project"),r.appendChild(o),e.id===n){o.classList.add("editing");const t=document.createElement("input");t.type="text",t.className="editing-project-input",t.value=e.name,t.placeholder="Rename project...",o.append(t),t.focus()}else{const n=document.createElement("span");if(n.textContent=e.name,o.append(n),e.id===t){const t=document.createElement("button");t.className="delete-project-btn",t.setAttribute("aria-label",`Delete project: ${e.name}`);const n=v();t.append(n);const c=document.createElement("button");c.className="edit-project-btn",c.setAttribute("aria-label",`Rename project: ${e.name}`);const r=j();c.append(r);const s=document.createElement("div");s.className="project-action",s.append(c,t),o.append(s)}}});const s=c.querySelector(".new-project-btn"),i=c.querySelector("#new-project-input");s.classList.toggle("is-hidden",o),i.classList.toggle("is-hidden",!o),o&&i.focus()})(e.projects,e.currentProjectId,e.isCreatingProject,e.editingProjectId),function(e){const t=document.getElementById("main-content");if(t.replaceChildren(),e){const o=document.createElement("h1");if(o.className="project-title-header",o.textContent=e.name,t.append(o),e.todos.length>0){const o=document.createElement("ul");o.className="todo-list",e.todos.forEach(e=>{const t=function(e){const t=document.createElement("li");t.className="todo-items",t.dataset.todoId=e.id,t.dataset.priority=e.priority,e.completed&&t.classList.add("is-completed");const o=document.createElement("div");o.className="priority-indicator";const n=document.createElement("div");n.className="todo-main-info";const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("class","todo-checkbox-svg"),c.setAttribute("viewBox","0 0 24 24"),c.innerHTML='\n    <circle class="checkbox-circle" cx="12" cy="12" r="10" fill="none" stroke="#888" stroke-width="2"/>\n    <path class="checkbox-checkmark" d="M7 13l3 3 7-7" stroke="#00C4B4" stroke-width="2" fill="none"/>\n';const r=document.createElement("div");r.className="title-and-date";const s=document.createElement("span");s.textContent=e.title,s.className="todo-title";const i=document.createElement("span");i.className="todo-due-date",i.textContent=function(e){if(!e||"none"===e)return"";const t=(0,E.H)(e);return(0,b.s)(t,new Date)?(0,w.c)(t)?"Today":(0,k.e)(t)?"Tomorrow":(0,P.P)(t)?"Yesterday":(0,C.x)(t)?(0,I.GP)(t,"EEEE"):(0,I.GP)(t,"MMM d"):(0,I.GP)(t,"MMM d, yyyy")}(e.dueDate),r.append(s,i),n.append(c,r);const d=document.createElement("div");d.className="todo-details";const a=document.createElement("p");a.className="todo-description",a.textContent=e.description;const l=document.createElement("button");l.className="delete-todo-btn",l.setAttribute("aria-label",`Delete task: ${e.title}`);const p=v();l.append(p);const u=document.createElement("button");u.className="edit-todo-btn",u.setAttribute("aria-label",`Edit task: ${e.title}`);const m=j();u.append(m);const g=document.createElement("div");return g.className="todo-actions",g.append(u,l),d.append(a,g),t.append(o,n,d),t}(e);o.appendChild(t)}),t.appendChild(o)}else{const e=document.createElement("div");e.className="empty-state";const o=document.createElement("img");o.className="empty-state-img",o.src=L,o.alt="Minimalist empty state illustration for a to-do list app",o.width=200,o.height=200;const n=document.createElement("h3");n.className="empty-state-message",n.textContent="There are no tasks yet. Add the first one!",e.append(o,n),t.appendChild(e)}}}(t),N()}function B(e){document.getElementById("modal-overlay").classList.remove("hidden"),"create"===e.mode?document.getElementById("titleForm").textContent="Add Task":"edit"===e.mode&&(document.getElementById("titleForm").textContent="Edit Task")}function A(){document.getElementById("modal-overlay").classList.add("hidden")}var S=o(78);function D(e,t,o){function n(o,n,c){const r=e(),s=r.projects.map(e=>e.id===r.currentProjectId?{...e,todos:e.todos.map(e=>e.id===o?{...e,completed:!e.completed}:e)}:e),i={...r,projects:s};n.completed?t(i):function(e){const o=e.querySelector(".checkbox-checkmark"),n=e.querySelector(".checkbox-circle"),c=o.getTotalLength();o.style.strokeDasharray=c,o.style.strokeDashoffset=c,o.style.opacity="1",(0,S.i0)(n,{stroke:["#888","#00C4B4"],duration:400,ease:"outSine"}),(0,S.i0)(o,{strokeDashoffset:[c,0],duration:500,ease:"outSine",delay:100}).then(()=>{t(i)})}(c)}document.getElementById("main-content").addEventListener("click",c=>{const r=c.target.closest(".todo-items");if(!r)return;const s=e(),i=s.projects.find(e=>e.id===s.currentProjectId);if(!i)return;const d=r.dataset.todoId;if(c.target.closest(".delete-todo-btn"))return c.stopPropagation(),void function(o){const n=e(),c=n.projects.map(e=>e.id===n.currentProjectId?{...e,todos:e.todos.filter(e=>e.id!==o)}:e);t({...n,projects:c})}(d);if(c.target.closest(".edit-todo-btn")){c.stopPropagation();const e=i.todos.find(e=>e.id===d);return void(e&&o&&o(e))}if(c.target.closest(".todo-checkbox-svg")){c.stopPropagation();const e=i.todos.find(e=>e.id===d);return void(e&&n(d,e,c.target.closest(".todo-checkbox-svg")))}r.classList.toggle("is-expanded")})}let T=function(){let e=localStorage.getItem("todoAppState");if(e)return JSON.parse(e,(e,t)=>{if(t&&"object"==typeof t&&Array.isArray(t.todos)&&t.name){const e=new c(t.name);return e.id=t.id,e.todos=t.todos,e}return t&&"object"==typeof t&&null!==t&&t.title&&void 0!==t.completed?new n(t.title,t.description,t.dueDate,t.priority,t.completed,t.id):t})}()||l;!function(e,t){(function(e,t){const o=document.getElementById("sidebar");o.addEventListener("click",o=>{const n=o.target.closest(".delete-project-btn");if(n){o.stopPropagation();const c=n.closest(".project-item");return void(c&&function(o){const n=e(),c=n.projects.findIndex(e=>e.id===o),r=n.projects.filter(e=>e.id!==o);let s=null;r.length>0&&(s=0===c?r[0].id:r[c-1].id),t({...n,projects:r,currentProjectId:s})}(c.dataset.projectId))}const c=o.target.closest(".edit-project-btn");if(c){o.stopPropagation();const n=c.closest(".project-item");return void(n&&(r=n.dataset.projectId,t({...e(),editingProjectId:r,isCreatingProject:!1})))}var r;const s=o.target.closest(".project-item");s?function(o){const n=e();n.currentProjectId!==o&&t({...n,currentProjectId:o})}(s.dataset.projectId):o.target.closest(".new-project-btn")&&t({...e(),editingProjectId:null,isCreatingProject:!0})})})(e,t),function(e,t){const o=document.getElementById("sidebar");let n=!1;const r=()=>{n=!0,setTimeout(()=>{n=!1},100)};o.addEventListener("keydown",o=>{"new-project-input"===o.target.id?function(o,n){if("Enter"===o.key){r();const o=n.value.trim();if(o){const r=new c(o);t({...e(),projects:[...e().projects,r],currentProjectId:r.id,isCreatingProject:!1}),n.value=""}else n.value="",t({...e(),isCreatingProject:!1})}else"Escape"===o.key&&(n.value="",t({...e(),isCreatingProject:!1}))}(o,o.target):o.target.closest(".editing-project-input")&&function(o,n){if("Enter"===o.key){r();const o=n.value.trim(),c=e();if(o){const e=c.projects.map(e=>e.id===c.editingProjectId?{...e,name:o}:e);t({...c,projects:e,editingProjectId:null})}else t({...c,editingProjectId:null})}else"Escape"===o.key&&t({...e(),editingProjectId:null})}(o,o.target)}),o.addEventListener("blur",o=>{o.relatedTarget?.closest("#fab-add-todo")||n||("new-project-input"===o.target.id?(o.target.value="",t({...e(),isCreatingProject:!1})):o.target.closest(".editing-project-input")&&e().editingProjectId&&t({...e(),editingProjectId:null}))},!0)}(e,t);const o=function(e,t){const o=document.getElementById("edit-form"),c=document.getElementById("edit-title"),r=document.querySelector(".priority-segmented-control");let s=null,i=null;function d(e){c.value=e.title,document.getElementById("edit-description").value=e.description,document.getElementById("edit-dueDate").value=e.dueDate||"",a(e.priority)}function a(e){r.querySelectorAll(".priority-segment").forEach(e=>e.classList.remove("active"));const t=r.querySelector(`[data-priority="${e}"]`);t.classList.add("active"),i=t,r.setAttribute("data-active",e)}return o.addEventListener("submit",r=>{r.preventDefault();const d=c.value.trim(),a=document.getElementById("edit-description").value.trim(),l=document.getElementById("edit-dueDate").value,p=i.dataset.priority,u=e();let m;if(null!==s)m=u.projects.map(e=>e.id===u.currentProjectId?{...e,todos:e.todos.map(e=>e.id===s?{...e,title:d,description:a,dueDate:l,priority:p}:e)}:e);else{const e=new n(d,a,l,p);m=u.projects.map(t=>t.id===u.currentProjectId?{...t,todos:[...t.todos,e]}:t)}t({...u,projects:m}),s=null,A(),o.reset()}),r.addEventListener("click",e=>{e.preventDefault();const t=e.target.closest(".priority-segment");t&&a(t.dataset.priority)}),c.addEventListener("input",()=>{c.value.length>30?c.setCustomValidity("Title cannot be longer than 30 characters."):c.setCustomValidity("")}),document.getElementById("cancel-edit-btn").addEventListener("click",e=>{e.preventDefault(),A()}),document.getElementById("fab-add-todo").addEventListener("click",t=>{if(t.target.closest(".fab")){const t=e();if(!t.projects.find(e=>e.id===t.currentProjectId))return void alert("Please select a project first to add a task.");s=null,B({mode:"create"}),d({title:"",description:"",dueDate:"",priority:"low"})}}),{fillForm:d,setCurrentEditingId:e=>{s=e}}}(e,t);D(e,t,e=>{o.setCurrentEditingId(e.id),B({mode:"edit"}),o.fillForm(e)})}(()=>T,function(e){var t;T=e,x(T),t=T,localStorage.setItem("todoAppState",JSON.stringify(t))}),x(T)}},o={};function n(e){var c=o[e];if(void 0!==c)return c.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,o,c,r)=>{if(!o){var s=1/0;for(l=0;l<e.length;l++){for(var[o,c,r]=e[l],i=!0,d=0;d<o.length;d++)(!1&r||s>=r)&&Object.keys(n.O).every(e=>n.O[e](o[d]))?o.splice(d--,1):(i=!1,r<s&&(s=r));if(i){e.splice(l--,1);var a=c();void 0!==a&&(t=a)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,c,r]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var c=o.length-1;c>-1&&(!e||!/^http(s?):/.test(e));)e=o[c--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var c,r,[s,i,d]=o,a=0;if(s.some(t=>0!==e[t])){for(c in i)n.o(i,c)&&(n.m[c]=i[c]);if(d)var l=d(n)}for(t&&t(o);a<s.length;a++)r=s[a],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},o=self.webpackChunktodo_app=self.webpackChunktodo_app||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=n.O(void 0,[760],()=>n(719));c=n.O(c)})();